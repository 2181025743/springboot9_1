<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yx.mapper.EmpMapper">

    <!-- 1. 新增 -->
    <insert id="insert" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO emp (name, addr, dept, age)
        VALUES (#{name}, #{addr}, #{dept}, #{age})
    </insert>

    <!-- 2. 根据ID删除 -->
    <delete id="deleteById">
        DELETE FROM emp WHERE id = #{id}
    </delete>

    <!-- 3. 条件删除 -->
    <delete id="deleteByCondition">
        DELETE FROM emp
        <where>
            <if test="name != null and name != ''">
                AND name LIKE CONCAT('%', #{name}, '%')
            </if>
            <if test="dept != null and dept != ''">
                AND dept = #{dept}
            </if>
            <if test="minAge != null">
                AND age >= #{minAge}
            </if>
            <if test="maxAge != null">
                AND age &lt;= #{maxAge}
            </if>
        </where>
    </delete>

    <!-- 4. 根据ID修改 -->
    <update id="updateById">
        UPDATE emp
        <set>
            <if test="name != null and name != ''">
                name = #{name},
            </if>
            <if test="addr != null and addr != ''">
                addr = #{addr},
            </if>
            <if test="dept != null and dept != ''">
                dept = #{dept},
            </if>
            <if test="age != null">
                age = #{age},
            </if>
        </set>
        WHERE id = #{id}
    </update>

    <!-- 5. 查询全部 -->
    <select id="selectAll" resultType="Emp">
        SELECT * FROM emp
    </select>

    <!-- 6. 根据ID查询 -->
    <select id="selectById" resultType="Emp">
        SELECT * FROM emp WHERE id = #{id}
    </select>

    <!-- 7. 条件查询 -->
    <select id="selectByCondition" resultType="Emp">
        SELECT * FROM emp
        <where>
            <if test="name != null and name != ''">
                AND name LIKE CONCAT('%', #{name}, '%')
            </if>
            <if test="dept != null and dept != ''">
                AND dept = #{dept}
            </if>
            <if test="minAge != null">
                AND age >= #{minAge}
            </if>
            <if test="maxAge != null">
                AND age &lt;= #{maxAge}
            </if>
        </where>
    </select>
</mapper>